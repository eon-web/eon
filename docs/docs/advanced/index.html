<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Samples |Â Eon.js Docs</title>
    <link rel="stylesheet" href="/index.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
    
    
</head>

<body>
    <header>
        <div class="left">
            <button id="button-dark-mode">
                <svg width="24" height="24" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" id="moonIcon">
                    <path
                        d="M17.9565 33C17.5052 33 17.0539 33 16.6026 33C8.32869 32.2462 2.3113 24.8593 3.06348 16.5678C3.66522 9.33166 9.38174 3.60302 16.6026 3C17.2043 3 17.8061 3.30151 18.107 3.75377C18.4078 4.20603 18.4078 4.9598 17.9565 5.41206C16.4522 7.37186 16.0009 9.78392 16.3017 12.196C16.6026 14.608 17.9565 16.7186 19.9122 18.0754C23.0713 20.4874 27.4339 20.4874 30.593 18.0754C31.0443 17.7739 31.6461 17.6231 32.2478 17.9246C32.6991 18.2261 33 18.8291 33 19.4322C32.6991 23.5025 30.7435 27.1206 27.5843 29.6834C24.7261 31.794 21.4165 33 17.9565 33ZM13.7443 6.46734C9.38174 7.97487 6.37304 11.8945 5.92174 16.7186C5.32 23.3518 10.1339 29.2312 16.753 29.8342C19.9122 30.1357 23.0713 29.2312 25.4783 27.1206C27.133 25.7638 28.3365 23.9548 29.0887 21.995C25.3278 23.3518 21.1157 22.7487 17.8061 20.3367C15.2487 18.3769 13.5939 15.6633 12.9922 12.4975C12.8417 10.3869 13.1426 8.42714 13.7443 6.46734Z"
                        fill="currentColor"
                    />
                </svg>
            </button>
            <img src="/docs/assets/logo-no-border.svg" alt="Logo" id="logo" />
            <nav>
                
                    <a href="/" class="">Home</a>
                
                    <a href="/docs" class="selected">Docs</a>
                
                    <a href="https://github.com/eon-web/eon" class="">GitHub</a>
                
                    <a href="" class="">Contact</a>
                
            </nav>
        </div>
    </header>
    <aside>
        
            
                <h3 class="group-name">Getting Started</h3>
            
            
        
            
            
                <a href="/docs/introduction">Introduction</a>
            
        
            
            
                <a href="/docs/getting_started">Your first eon.js server</a>
            
        
            
                <h3 class="group-name">Advanced</h3>
            
            
        
            
            
                <a href="/docs/advanced">Advanced Examples</a>
            
        
            
            
                <a href="/docs/debugging">Debugging</a>
            
        
            
                <h3 class="group-name">API</h3>
            
            
        
            
            
                <a href="/docs/api">Core API</a>
            
        
            
            
                <a href="/docs/plugins">Plugins API</a>
            
        
    </aside>
    <main>
        <div class="body">
            <h1 class="title">Advanced Samples</h1>
            <p class="description"></p>
            <h1 id="advanced-examples">Advanced Examples</h1>
<p>Here are some more advanced examples to help you up your game more quickly</p>
<h2 id="post-endpoint">POST endpoint</h2>
<p>You can create a POST endpoint using the <code>post</code> method.
As of version v1.12.0, POST paths now have an <code>onBody</code> method. This is like <code>hook</code>, but when the callback is invoked, the body is already available. You can use it like this:</p>
<pre data-lang="js"><code><span class="token keyword">const</span> eon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eonjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create a post path on /post</span>
eon<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onBody</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You sent me </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="the-old-way">The old way</h3>
<p>This is how it was done in v1.11.x and earlier. <code>onBody</code> uses this method internally.</p>
<p>!&gt; Note that the body is received asynchronously and therefore the <code>hook</code> handler has to be used.</p>
<pre data-lang="js"><code><span class="token keyword">const</span> eon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eonjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create a post path on /post</span>
eon<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Listen for the arrival of the body</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// Send back a response</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You sent me </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="a-shorter-version">A shorter version</h3>
<p>Try it out with curl:</p>
<pre data-lang="bash"><code><span class="token function">curl</span> localhost:8080/post -d <span class="token string">'foo=bar&amp;baz=buzz'</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span></code></pre><p>Output:</p>
<pre data-lang="txt"><code>You sent me: {"foo":"bar","baz":"buzz"}</code></pre><p>The endpoint can also handle JSON input:</p>
<pre data-lang="bash"><code><span class="token function">curl</span> localhost:8080/post -d <span class="token string">'{"foo":"bar","baz":"buzz"}'</span> -H <span class="token string">"content-type:application/json"</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span></code></pre><p>Will result in the same output.</p>
<h2 id="own-server">Own Server</h2>
<p>As of v1.14.0, the <code>EonWebEngine</code> class is also callable, so you can pass it as a listener to <code>http</code>&#39;s <code>createServer</code> method. This is especially useful when you need your server to use <strong>SSL</strong>. In that case you could pass the <code>eon</code> instance to <code>https.createServer</code> instead of calling <code>eon.listen()</code>.</p>
<p>Ex.:</p>
<pre data-lang="js"><code><span class="token keyword">const</span> eon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eon'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

eon<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>eon<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Listening on http://localhost:8080/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
        </div>
        <div class="col-right"></div>
    </main>

    <script>
        if (localStorage.getItem('dark') === 'true') {
            document.body.classList.add('dark');
        }
        document.querySelector('#button-dark-mode').addEventListener('click', (e) => {
            if (document.body.classList.contains('dark')) {
                document.body.classList.remove('dark');
                localStorage.setItem('dark', false);
            } else {
                document.body.classList.add('dark');
                localStorage.setItem('dark', true);
            }
        });
    </script>
</body>

</html>